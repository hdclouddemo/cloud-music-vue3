import{U as V,ab as D,r as p,o as L,q as M,z as a,C as s,M as m,a as I,x as l,a8 as S,X as T,V as U,al as B,ad as P,W as z,a2 as N,ae as Y,n as $,ah as H,ag as R,am as j,ak as q,a0 as O,a1 as W}from"./index-BNr6xA4Y.js";import{E as X,a as F}from"./tab-pane-BlBa2_lr.js";import"./index-BFl8cwif.js";const G=i=>(O("data-v-d2ec7d44"),i=i(),W(),i),J={class:"album-Detail_container layout-content"},K={class:"header"},Q={class:"cover"},Z={class:"info"},aa={class:"up-box"},ea={class:"playlist-title"},sa={class:"creator"},ta={class:"created-time"},oa={class:"down-box"},na=G(()=>a("i",{class:"iconfont icon-bofang-solid"},null,-1)),la={class:"content"},ia=["innerHTML"],ca={__name:"AlbumDetail",setup(i){const v=S(),C=T(),w=D(),e=p({}),f=p([]),b=p("playlist");async function x(){const{startLoading:c,stopLoading:t}=U();try{c();const{album:n,songs:u}=await B({id:v.params.id});e.value=n,f.value=u,e.value.description=e.value.description.replace(/\n/g,"<br/>");const o=new Image;o.src=n.blurPicUrl,o.crossOrigin="Anonymous",o.onload=async()=>{const d=await new P().getColor(o);z(d),document.documentElement.style.setProperty("--body-before-opacity",1)}}finally{t()}}function k(){w.playAll(e.value.tracks)}function A(c){C.push(`/userInfo/${c}`)}return L(()=>{x()}),(c,t)=>{var y,g;const n=N,u=Y,o=j,r=F,d=q,E=X;return $(),M("div",J,[a("div",K,[a("div",Q,[s(n,{src:e.value.blurPicUrl},null,8,["src"])]),a("div",Z,[a("div",aa,[a("p",ea,m(e.value.name),1),a("div",sa,[s(n,{src:(y=e.value.artist)==null?void 0:y.picUrl},null,8,["src"]),a("span",{class:"author",onClick:t[0]||(t[0]=_=>{var h;return A((h=e.value.artist)==null?void 0:h.id)})},m((g=e.value.artist)==null?void 0:g.name),1),a("span",ta,m(I(H)(e.value.publishTime).format("YYYY-MM-DD"))+"发布",1)])]),a("div",oa,[s(u,{class:"play-all-btn",type:"primary",onClick:t[1]||(t[1]=_=>k())},{default:l(()=>[na,R(" 播放全部 ")]),_:1})])])]),a("div",la,[s(E,{modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=_=>b.value=_)},{default:l(()=>[s(r,{label:"歌曲",name:"playlist",lazy:""},{default:l(()=>[s(o,{"song-list":f.value},null,8,["song-list"])]),_:1}),s(r,{label:"评论",name:"review",lazy:""},{default:l(()=>[s(d,{id:I(v).params.id,type:"2","target-type":"2"},null,8,["id"])]),_:1}),s(r,{label:"专辑详情",name:"description",lazy:""},{default:l(()=>[a("div",{class:"description",innerHTML:e.value.description},null,8,ia)]),_:1})]),_:1},8,["modelValue"])])])}}},_a=V(ca,[["__scopeId","data-v-d2ec7d44"]]);export{_a as default};
