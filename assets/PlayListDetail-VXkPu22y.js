import{b as q,a5 as M,k as z,a6 as Y,l as j,c as F,Q as J,n as x,v as D,x as d,I as K,A as O,a as b,J as Q,a7 as W,_ as X,R as G,a8 as $,X as A,r as p,w as H,a9 as Z,aa as tt,U as et,ab as at,o as st,q as ot,z as e,C as o,M as v,V as lt,ac as nt,ad as it,W as ct,a2 as rt,ae as ut,af as dt,ag as T,ah as pt,a0 as _t,a1 as mt,ai as ft,aj as vt,ak as yt}from"./index-CjM2ZCf2.js";import{E as gt,a as ht}from"./tab-pane-RHqxzkb9.js";import"./index-Bbv-URMj.js";const bt=q({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:M,default:""},truncated:{type:Boolean},lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),Ct=z({name:"ElText"}),St=z({...Ct,props:bt,setup(c){const a=c,y=Y(),l=j("text"),t=F(()=>[l.b(),l.m(a.type),l.m(y.value),l.is("truncated",a.truncated),l.is("line-clamp",!J(a.lineClamp))]);return(i,_)=>(x(),D(W(i.tag),{class:O(b(t)),style:Q({"-webkit-line-clamp":i.lineClamp})},{default:d(()=>[K(i.$slots,"default")]),_:3},8,["class","style"]))}});var kt=X(St,[["__file","text.vue"]]);const xt=G(kt),It={__name:"Collector",setup(c){const a=$(),y=A(),l=p(null),t=p({id:a.params.id,limit:30,offset:0});async function i(){const n=await Z({id:a.params.id,limit:t.value.limit,offset:t.value.offset});return{content:n.subscribers,totalElements:n.total}}function _(n){y.push(`/userInfo/${n.userId}`)}return H(a,()=>{t.value.id=a.query.id,t.value.offset=0,l.value.handleSearch()},{deep:!0}),(n,r)=>{const C=tt;return x(),D(C,{ref_key:"SearchCardListRef",ref:l,offset:t.value.offset,"onUpdate:offset":r[0]||(r[0]=g=>t.value.offset=g),limit:t.value.limit,"onUpdate:limit":r[1]||(r[1]=g=>t.value.limit=g),request:i,"show-icon":!1,"cover-key":"avatarUrl","name-key":"nickname",round:"",onItemClick:_},null,8,["offset","limit"])}}},L=c=>(_t("data-v-b2978981"),c=c(),mt(),c),wt={class:"playlist-detail_container layout-content"},Pt={class:"header"},Ut={class:"cover"},Et={class:"play-counts"},Tt=L(()=>e("i",{class:"iconfont icon-bofang-solid"},null,-1)),zt={class:"counts"},Dt={class:"info"},$t={class:"up-box"},At={class:"playlist-title"},Lt={class:"playlist-desc"},Bt={class:"creator"},Vt={class:"tags"},Nt={class:"created-time"},Rt={class:"down-box"},qt=L(()=>e("i",{class:"iconfont icon-bofang-solid"},null,-1)),Mt={class:"content"},Yt={__name:"PlayListDetail",setup(c){const a=$(),y=A(),l=at(),t=p({}),i=p(0),_=p(0),n=p(30),r=p("playlist");async function C(){const{startLoading:m,stopLoading:s}=lt();try{m();const{playlist:h}=await nt({id:a.params.id});t.value=h,i.value=h.trackCount;const f=new Image;f.src=t.value.coverImgUrl,f.crossOrigin="Anonymous",f.onload=async()=>{const S=await new it().getColor(f);ct(S),document.documentElement.style.setProperty("--body-before-opacity",1)}}finally{s()}}async function g(){const{songs:m}=await ft({id:a.params.id,limit:n.value,offset:_.value});return{content:m,totalElements:i.value}}function B(){l.playAll(t.value.tracks)}function V(m){y.push(`/userInfo/${m}`)}return st(()=>{C()}),(m,s)=>{var w,P,U;const h=rt,f=xt,I=ut,S=vt,k=ht,N=yt,R=gt;return x(),ot("div",wt,[e("div",Pt,[e("div",Ut,[o(h,{src:t.value.coverImgUrl},null,8,["src"]),e("div",Et,[Tt,e("span",zt,v(b(dt)(t.value.playCount)),1)])]),e("div",Dt,[e("div",$t,[e("p",At,v(t.value.name),1),e("p",Lt,[o(f,{"line-clamp":"2"},{default:d(()=>[T(v(t.value.description),1)]),_:1})]),e("div",Bt,[o(h,{src:(w=t.value.creator)==null?void 0:w.avatarUrl},null,8,["src"]),e("span",{class:"author",onClick:s[0]||(s[0]=u=>{var E;return V((E=t.value.creator)==null?void 0:E.userId)})},v((P=t.value.creator)==null?void 0:P.nickname),1),e("span",Vt,"标签："+v(((U=t.value.algTags)==null?void 0:U.join("/"))||"--"),1),e("span",Nt,v(b(pt)(t.value.createTime).format("YYYY-MM-DD"))+"创建",1)])]),e("div",Rt,[o(I,{class:"play-all-btn",type:"primary",onClick:s[1]||(s[1]=u=>B())},{default:d(()=>[qt,T(" 播放全部 ")]),_:1})])])]),e("div",Mt,[o(R,{modelValue:r.value,"onUpdate:modelValue":s[4]||(s[4]=u=>r.value=u)},{default:d(()=>[o(k,{label:"歌曲",name:"playlist",lazy:""},{default:d(()=>[o(S,{ref:"SearchTableRef",offset:_.value,"onUpdate:offset":s[2]||(s[2]=u=>_.value=u),limit:n.value,"onUpdate:limit":s[3]||(s[3]=u=>n.value=u),request:g},null,8,["offset","limit"])]),_:1}),o(k,{label:"评论",name:"review",lazy:""},{default:d(()=>[o(N,{id:b(a).params.id,type:"2","target-type":"1"},null,8,["id"])]),_:1}),o(k,{label:"收藏者",name:"collector",lazy:""},{default:d(()=>[o(It)]),_:1})]),_:1},8,["modelValue"])])])}}},Kt=et(Yt,[["__scopeId","data-v-b2978981"]]);export{Kt as default};
